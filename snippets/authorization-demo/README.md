authorization-demo
=========================

In our project people asking for security, how can we assure that only users complete tasks that they are allowed to. This snippet shows how you can get there.


Show me the important parts!
----------------------------

It is just jUnit-driven, the project consists of a task listener to check if the user is authorized to claim and complete the actual task. In the test you should get an impression how to use and extend it. 

The task listener is created as a process engine plugin.

How does it work?
-----------------

For our simple process with two user tasks in different lanes two additional resourced are defined to check against later on. The resource id is the same as the resource name and it is build from the parts ``processDefinitionKey-candidateGroup``, in this example 'authorization-demo-management' with type 10 and 'authorization-demo-sales' with type 11. The resources are defined in a static member ``AuthorizationResources.resources`` as a HashMap.

While setting up the unit test authorizations for the resources are created. The group 'management' is granted the authorization to access and create one of the resources, the group 'sales' is granted to access the other one.

A super-user gets all permissions to the resources to delete during deployment cleanup. To do this, the a new subclass of ProcessEngineRule is used to run the test. The super-user is authenticated before finishing the tests. 
  

How to use it?
--------------

There is no web interface to access the application.
To get started refer to the `InMemoryH2Test`.

You can also use `ant` to build and deploy the example to an application server.
For that to work you need to copy the file `build.properties.example` to `build.properties`
and configure the path to your application server inside it.
Alternatively, you can also copy it to `${user.home}/.camunda/build.properties`
to have a central configuration that works with all projects generated by the
[Camunda BPM Maven Archetypes](http://docs.camunda.org/latest/guides/user-guide/#process-applications-maven-project-templates-archetypes).

Once you deployed the application you can run it using
[Camunda Tasklist](http://docs.camunda.org/latest/guides/user-guide/#tasklist)
and inspect it using
[Camunda Cockpit](http://docs.camunda.org/latest/guides/user-guide/#cockpit).


Environment Restrictions
------------------------

Built and tested against Camunda BPM version 7.1.0-Final.


Known Issues
------------


Improvements Backlog
--------------------

Find a place to create and store resources dynamically, maybe a database table. In this example its a static HashMap.
